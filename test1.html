<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Zachary Metz" />
  <title>Thanks Man ORM Documentation</title>
  <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style>
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Thanks Man ORM Documentation</h1>
<p class="author">Zachary Metz</p>
</header>
<h1 id="quick-start">Quick Start</h1>
<h2 id="getting-set-up">Getting Set up</h2>
<ul>
<li>Once Database Abstract is imported call its create function and it will return to you an object that has automaticall set itself up with your table schema</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1">    <span class="kw">const</span> db <span class="op">=</span> <span class="va">DatabaseAbstract</span>.<span class="at">create</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">        hostname <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-3" title="3">        username <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-4" title="4">        password <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-5" title="5">        databaseName <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-6" title="6">        schema <span class="op">=</span> <span class="st">&quot;&quot;</span></a>
<a class="sourceLine" id="cb1-7" title="7">    <span class="op">}</span>)</a></code></pre></div>
<ul>
<li>Now you can access tables like this :</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">let</span> currentUser <span class="op">=</span> <span class="cf">await</span> <span class="va">db</span>.<span class="va">user</span>.<span class="at">where</span>(x<span class="kw">=&gt;</span><span class="va">x</span>.<span class="at">userid</span> <span class="op">==</span> <span class="dv">3</span>).<span class="at">firstOrDefault</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="va">db</span>.<span class="va">users</span>.<span class="at">first</span>(<span class="dv">100</span>).<span class="at">toList</span>()<span class="op">;</span></a></code></pre></div>
<h1 id="basics">Basics</h1>
<h2 id="about">About</h2>
<p>Thanks Man is an ORM made for postgres that tries to emulate as many feautrs of entity framework as possible while being dead simple to get started with and support for advanced functionality.</p>
<ul>
<li><em>The DatabaseAbstract Object</em> - The object that represents the database in your code and is an nice interface to query and update objects from tables are accesable from db.TableName and all crud operation will happen to this object</li>
</ul>
<h2 id="how-get-rows-from-the-database">How Get Rows From The Database</h2>
<p>The most basic way to get objects from the database (using table user as an example) is :</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">var</span> users <span class="op">=</span> <span class="cf">await</span> <span class="va">db</span>.<span class="va">user</span>.<span class="at">toList</span>()<span class="op">;</span></a></code></pre></div>
<h2 id="how-to-qurey-for-information">How to Qurey For Information</h2>
<p>You can add more complex queries by adding differnt modifiers that will affect the resulting data pull</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">var</span> selectedUser <span class="op">=</span> <span class="cf">await</span> <span class="va">db</span>.<span class="at">user</span></a>
<a class="sourceLine" id="cb4-2" title="2">    <span class="co">// use lambda functions for filtering </span></a>
<a class="sourceLine" id="cb4-3" title="3">    .<span class="at">where</span>(x <span class="kw">=&gt;</span> <span class="va">x</span>.<span class="at">first_name</span> <span class="op">==</span> <span class="st">&quot;john&quot;</span>) </a>
<a class="sourceLine" id="cb4-4" title="4">    .<span class="at">orderBy</span>(<span class="st">&quot;last_login&quot;</span>)  </a>
<a class="sourceLine" id="cb4-5" title="5">    .<span class="at">desc</span>()</a>
<a class="sourceLine" id="cb4-6" title="6">    .<span class="at">limit</span>(<span class="dv">20</span>) <span class="co">//   only return 20 rows</span></a>
<a class="sourceLine" id="cb4-7" title="7">    .<span class="at">offset</span>(<span class="dv">100</span>)    <span class="co">//  skip the first 100 rows </span></a>
<a class="sourceLine" id="cb4-8" title="8">    .<span class="at">toList</span>()<span class="op">;</span>      <span class="co">//  return a list</span></a></code></pre></div>
<h2 id="how-to-update-rows">How to Update Rows</h2>
<p>Once objects are pulled from the database for us to use any modifications made to the rows can be saved very easily by invoking db.saveChanges(), it will automatically find changes to objects pulled and update the relevant columns in the db.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">let</span> currentUser <span class="op">=</span> <span class="cf">await</span> <span class="va">db</span>.<span class="va">user</span>.<span class="at">firstOrDefault</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="va">currentUser</span>.<span class="at">favouriteColor</span> <span class="op">=</span> <span class="st">&quot;Red&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="cf">await</span> <span class="va">db</span>.<span class="at">saveChanges</span>()<span class="op">;</span>  <span class="co">// persists changes to db</span></a></code></pre></div>
<h2 id="how-to-insert-rows">How To Insert Rows</h2>
<p>Inserting Records Into the database is also managed by the db.TableName object and a new row object can be aquried by calling db.tableObject.newRow(). This will return a new row object for you to populate before calling db.saveChanges().</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">let</span> newUser <span class="op">=</span> <span class="va">db</span>.<span class="va">user</span>.<span class="at">newRow</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="va">newUser</span>.<span class="at">email</span> <span class="op">=</span> <span class="st">&quot;example@example.ca&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="va">newUser</span>.<span class="at">password</span> <span class="op">=</span> <span class="st">&quot;secret&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="va">newUser</span>.<span class="at">lastLogin</span> <span class="op">=</span> (<span class="kw">new</span> <span class="at">Date</span>()).<span class="at">getTime</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="cf">await</span> <span class="va">db</span>.<span class="at">saveChanges</span>()<span class="op">;</span></a></code></pre></div>
<h2 id="how-to-delete-rows">How To Delete Rows</h2>
<p>Deleteing rows can be done by passing the row object that you want removed from the database to db.delete(rowObject) and then commiting the action with db.saveChanges(). This trigger a delete script that will be sent to the db.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">let</span> currentUser <span class="op">=</span> <span class="cf">await</span> <span class="va">db</span>.<span class="va">user</span>.<span class="at">firstOrDefault</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="va">db</span>.<span class="at">delete</span>(currenUser)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="cf">await</span> <span class="va">db</span>.<span class="at">saveChanges</span>()<span class="op">;</span></a></code></pre></div>
<h1 id="examples">Examples</h1>
<h1 id="retriving">Retriving</h1>
<h2 id="where">Where</h2>
<p>Used to filter results, will accept an sql string, filter object or a lambda function and applies it to the query.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1">    .<span class="at">where</span>(x <span class="kw">=&gt;</span> <span class="va">x</span>.<span class="at">id</span> <span class="op">==</span> <span class="dv">43</span>)</a>
<a class="sourceLine" id="cb8-2" title="2">    .<span class="at">where</span>(x <span class="kw">=&gt;</span> <span class="va">array</span>.<span class="at">includes</span>(<span class="va">x</span>.<span class="at">id</span>))</a>
<a class="sourceLine" id="cb8-3" title="3">    .<span class="at">where</span>(<span class="st">&quot;id = 43&quot;</span>)</a>
<a class="sourceLine" id="cb8-4" title="4">    .<span class="at">where</span>(<span class="st">&quot;id in (1,2,3,4,5)&quot;</span>)</a></code></pre></div>
<h2 id="join">Join</h2>
<p>Still to be implimented in orm funcionality.</p>
<h2 id="order-by">Order By</h2>
<p>Determines the column the query results will be ordered by.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1">    .<span class="at">orderBy</span>(<span class="st">&quot;id&quot;</span>)</a>
<a class="sourceLine" id="cb9-2" title="2">    .<span class="at">orderBy</span>(<span class="st">&quot;first_name&quot;</span>)</a>
<a class="sourceLine" id="cb9-3" title="3">    .<span class="at">orderBy</span>(<span class="st">&quot;email&quot;</span>)</a></code></pre></div>
<h2 id="desc-asc">Desc / Asc</h2>
<p>This modifier works in conjunction with the orderBy to determing if it is in decenting or ascending sort order.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1">    <span class="co">//  to order them by decending </span></a>
<a class="sourceLine" id="cb10-2" title="2">    .<span class="at">desc</span>()</a>
<a class="sourceLine" id="cb10-3" title="3"></a>
<a class="sourceLine" id="cb10-4" title="4">    <span class="co">//  to order by ascending </span></a>
<a class="sourceLine" id="cb10-5" title="5">    .<span class="at">asc</span>()</a></code></pre></div>
<h2 id="limit">Limit</h2>
<p>The limit modifer will restric the number of rows returned to you via a query. It is a direct map to the limit sql keyord</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1">    <span class="co">//  only get 20 rows back</span></a>
<a class="sourceLine" id="cb11-2" title="2">    .<span class="at">limit</span>(<span class="dv">20</span>)</a>
<a class="sourceLine" id="cb11-3" title="3">    <span class="co">//  only get 500 rows back</span></a>
<a class="sourceLine" id="cb11-4" title="4">    .<span class="at">limit</span>(<span class="dv">500</span>)</a></code></pre></div>
<h2 id="offset">Offset</h2>
<p>The offset modifer will ignore the first n rows in the result and start returning them from the offset point instead of at the first one</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1">    <span class="co">//  skip the first 100 rows when returning</span></a>
<a class="sourceLine" id="cb12-2" title="2">    .<span class="at">offset</span>(<span class="dv">100</span>) </a></code></pre></div>
<h2 id="first">First</h2>
<p>This function will run the query and return a list of rows that corrispond to your request with the number of objects you specify. It impliments async and await.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb13-1" title="1">    <span class="co">//  returns the first 20 rows to you </span></a>
<a class="sourceLine" id="cb13-2" title="2">    <span class="kw">let</span> users <span class="op">=</span> <span class="cf">await</span> <span class="va">db</span>.<span class="va">user</span>.<span class="at">first</span>(<span class="dv">20</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb13-3" title="3">    <span class="co">//  returns the first 100 rows to you </span></a>
<a class="sourceLine" id="cb13-4" title="4">    <span class="kw">let</span> users <span class="op">=</span> <span class="cf">await</span> <span class="va">db</span>.<span class="va">user</span>.<span class="at">first</span>(<span class="dv">100</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="first-or-default">First Or Default</h2>
<p>Similar To the <code>.first(n)</code> method this function will run the query and return the first row object that is pulled or if there is null <code>null</code>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb14-1" title="1">    <span class="co">//  returns the first 20 rows to you </span></a>
<a class="sourceLine" id="cb14-2" title="2">    <span class="kw">let</span> currentUser <span class="op">=</span> <span class="cf">await</span> <span class="va">db</span>.<span class="va">user</span>.<span class="at">firstOrDefault</span>()<span class="op">;</span></a></code></pre></div>
<h2 id="to-list">To List</h2>
<p>This function also runs the quries but has not restriction on the number of records returned it will just give everything that matched your query in the database back.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb15-1" title="1">    <span class="co">//  returns all of the user rows to you </span></a>
<a class="sourceLine" id="cb15-2" title="2">    <span class="kw">let</span> users <span class="op">=</span> <span class="cf">await</span> <span class="va">db</span>.<span class="va">user</span>.<span class="at">toList</span>()<span class="op">;</span></a></code></pre></div>
<h1 id="updating">Updating</h1>
<h1 id="inserting">Inserting</h1>
<h1 id="deleting">Deleting</h1>
<h1 id="reference">Reference</h1>
</body>
</html>
